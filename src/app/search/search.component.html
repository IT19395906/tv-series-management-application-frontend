<div class="container">
    <h2 class="text-center mb-3 fw-bold">Tv Series Available</h2>
    <form [formGroup]="searchForm">
        <mat-form-field appearance="outline" class="minisearchfield mx-auto d-block mb-4 w-50">
            <mat-label>Search</mat-label>
            <input matInput type="search" minlength="2" maxlength="40" placeholder="What are you looking for?"
                formControlName="search" />
            <button matSuffix mat-icon-button class="me-3" type="submit" (click)="search()"><i class="fa fa-search"></i>
            </button>
            <mat-error *ngIf="searchForm.get('search')?.hasError('required')">Please enter keyword</mat-error>
            <mat-error *ngIf="searchForm.get('search')?.hasError('minlength')">Please enter at leaset 2
                letters</mat-error>
        </mat-form-field>
    </form>
    <nav class="hover-wrapper mb-3 d-flex justify-content-center bg-light p-2">
        <button class="btn btn-outline-danger btn-sm mx-2" (click)="latestReleased()">Latest Released</button>
        <ng-container *ngFor="let item of dropdownItems">
            <button class="btn btn-outline-danger btn-sm mx-2" (click)="toggleContent(item.key)">{{item.label}}</button>
            <div *ngIf="activeDropdown === item.key" class="hover-popup" (mouseenter)="keepContent(item.key)"
                (mouseleave)="closeContent()">
                <button *ngFor="let value of item.values.sort()" (click)="onBtn(value,item)">{{value}}</button>
            </div>
        </ng-container>
    </nav>
    <div class="row g-5">
        <div class="col-sm-12 col-md-6 col-lg-3" *ngFor="let data of tvseries">
            <div style="cursor: pointer;" class="card h-100 shadow-lg" (click)="navigate(data)">
                <img [src]="data.img" loading="lazy" class="card-img-top" alt="{{data.title}}"
                    onerror="this.src='assets/default-image.jpg';">
                <div class="card-body">
                    <h4 class="card-title">{{data.title}}</h4>
                    <p class="card-text text-muted small mb-0">{{data.category}}</p>
                    <p class="card-text text-muted small mb-0">{{data.quality}}&nbsp;{{data.format}}</p>
                    <p class="card-text text-muted small mb-0">{{data.releasedDate}}</p>
                    <p class="fw-bold mb-0"><span class="status-circle" [ngClass]="{
                'bg-success': data.status === 'ongoing',
                'bg-danger': data.status === 'completed'
              }"></span>{{data.status}}</p>
                </div>
            </div>
        </div>
    </div>
</div>