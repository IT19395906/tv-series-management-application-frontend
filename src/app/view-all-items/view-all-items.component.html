<form [formGroup]="searchForm">
    <div class="row minHeight">
        <div class="col-lg-2 col-md-6 col-sm-12">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Category</mat-label>
                <mat-select formControlName="category">
                    <mat-option *ngFor="let category of categories.sort()" [value]="category">
                        {{category}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="col-lg-2 col-md-6 col-sm-12">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Title</mat-label>
                <input matInput type="text" maxlength="50" placeholder="Enter Title" formControlName="title" />
            </mat-form-field>
        </div>

        <div class="col-lg-2 col-md-6 col-sm-12">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Released From</mat-label>
                <input matInput [matDatepicker]="fromDatePicker" [min]="lastDate" [max]="today"
                    placeholder="select from date" (click)="fromDatePicker.open()" formControlName="fromDate"
                    readonly />
                <mat-datepicker-toggle [for]="fromDatePicker" matIconSuffix></mat-datepicker-toggle>
                <mat-datepicker #fromDatePicker></mat-datepicker>
                            <mat-error *ngIf="searchForm.get('fromDate')?.hasError('incompleteRange')">from date required</mat-error>
            </mat-form-field>
        </div>

        <div class="col-lg-2 col-md-6 col-sm-12">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Released To</mat-label>
                <input matInput [matDatepicker]="toDatePicker" [min]="lastDate" [max]="today"
                    placeholder="select to date" (click)="toDatePicker.open()" formControlName="toDate" readonly />
                <mat-datepicker-toggle [for]="toDatePicker" matIconSuffix></mat-datepicker-toggle>
                <mat-datepicker #toDatePicker></mat-datepicker>
                            <mat-error *ngIf="searchForm.get('toDate')?.hasError('incompleteRange')">to date required</mat-error>
            </mat-form-field>
        </div>

        <div class="col-lg-3 col-md-6 col-sm-12">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Added Date</mat-label>
                <mat-date-range-input [rangePicker]="addedDatePicker" [formGroup]="addedDateForm">
                    <input matStartDate formControlName="addedDateFrom" placeholder="select from date"
                        (click)="addedDatePicker.open()" readonly />
                    <input matEndDate formControlName="addedDateTo" placeholder="select to date"
                        (click)="addedDatePicker.open()" readonly />
                </mat-date-range-input>
                <mat-datepicker-toggle matIconSuffix [for]="addedDatePicker"></mat-datepicker-toggle>
                <mat-date-range-picker #addedDatePicker></mat-date-range-picker>
            </mat-form-field>
            <mat-error *ngIf="addedDateForm.hasError('incompleteRange') && (addedDateForm?.touched || addedDateForm?.dirty)" style="font-size: smaller; margin-top: -1rem;">start date and end date required</mat-error>
        </div>

        <div class="col-lg-2 col-md-6 col-sm-12">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Quality</mat-label>
                <mat-select formControlName="quality">
                    <mat-option value="480p">480p (SD)</mat-option>
                    <mat-option value="720p">720p (HD)</mat-option>
                    <mat-option value="1080p">1080p (Full HD)</mat-option>
                    <mat-option value="2k">2k</mat-option>
                    <mat-option value="4k">4k</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="d-flex flex-wrap gap-2">
                <button (click)="search()" mat-raised-button color="primary"> <i
                        class="fa fa-search"></i>Search</button>
                <button class="btn btn-danger rounded-pill" type="reset" value="Reset" (click)="clear()"><i
                        class="fa fa-trash"></i> Clear</button>
            </div>
        </div>

        <div class="col-lg-4 col-md-6 col-sm-12">
            <div class="d-flex flex-wrap gap-2">
                <button class="btn btn-outline-success" (click)="downloadCsv()"><i class="fa fa-download"></i> CSV</button>
                <button class="btn btn-outline-success"><i class="fa fa-download"></i> PDF</button>
            </div>
        </div>

    </div>
</form>
<table mat-table [dataSource]="tvSeriesDataSource" matSort class="table table-hover tbl-centered">
    <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>No</th>
        <td mat-cell *matCellDef="let element; let i = index">{{i+1}}</td>
    </ng-container>
    <ng-container matColumnDef="tvSeriesId">
        <th mat-header-cell *matHeaderCellDef>Tv Series Id</th>
        <td mat-cell *matCellDef="let element">{{element.id}}</td>
    </ng-container>
    <ng-container matColumnDef="category">
        <th mat-header-cell *matHeaderCellDef>Category</th>
        <td mat-cell *matCellDef="let element">{{element.category}}</td>
    </ng-container>
    <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef>Title</th>
        <td mat-cell *matCellDef="let element">{{element.title}}</td>
    </ng-container>
    <ng-container matColumnDef="addedDate">
        <th mat-header-cell *matHeaderCellDef>Added Date</th>
        <td mat-cell *matCellDef="let element">{{element.addedDate}}
        </td>
    </ng-container>
    <ng-container matColumnDef="addedBy">
        <th mat-header-cell *matHeaderCellDef>Added By</th>
        <td mat-cell *matCellDef="let element">{{element.addedBy}}
        </td>
    </ng-container>
    <ng-container matColumnDef="releasedDate">
        <th mat-header-cell *matHeaderCellDef>Released Date</th>
        <td mat-cell *matCellDef="let element">{{element.releasedDate}}
        </td>
    </ng-container>
    <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let element">{{element.status}}
        </td>
    </ng-container>
    <ng-container matColumnDef="seasons">
        <th mat-header-cell *matHeaderCellDef>No of Seasons</th>
        <td mat-cell *matCellDef="let element">{{element.seasons}}
        </td>
    </ng-container>
    <ng-container matColumnDef="episodes">
        <th mat-header-cell *matHeaderCellDef>No of Episodes</th>
        <td mat-cell *matCellDef="let element">{{element.episodes}}
        </td>
    </ng-container>
    <ng-container matColumnDef="language">
        <th mat-header-cell *matHeaderCellDef>Language</th>
        <td mat-cell *matCellDef="let element">{{element.language}}
        </td>
    </ng-container>
    <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let element;let i = index">
            <div class="d-flex flex-wrap gap-2">
                <button (click)="deleteRecord(element)" class="btn btn-danger btn-sm"><i
                        class="fa fa-trash"></i></button>
                <button (click)="editRecord(element)" class="btn btn-primary btn-sm"><i class="fa fa-edit"></i></button>
            </div>
        </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumnsTable"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumnsTable;"></tr>
</table>
<mat-paginator #paginator [pageSize]="5" [pageSizeOptions]="pageSizeOptions"
    [showFirstLastButtons]="true"></mat-paginator>

<mat-table [dataSource]="tvSeriesDataSource" matSort class="mat-elevation-z1 mt-5">

    <ng-container matColumnDef="id">
        <mat-header-cell *matHeaderCellDef>No</mat-header-cell>
        <mat-cell *matCellDef="let element; let i = index">{{i+1}}</mat-cell>
    </ng-container>

    <!-- ID Column -->
    <ng-container matColumnDef="tvSeriesId">
        <mat-header-cell *matHeaderCellDef>ID </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.id}} </mat-cell>
    </ng-container>

    <!-- Category Column -->
    <ng-container matColumnDef="category">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Category </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.category}} </mat-cell>
    </ng-container>

    <!-- Title Column -->
    <ng-container matColumnDef="title">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Title </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.title}} </mat-cell>
    </ng-container>

    <!-- Added Date Column -->
    <ng-container matColumnDef="addedDate">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Added Date </mat-header-cell>
        <mat-cell *matCellDef="let element" style="white-space: nowrap;"> {{element.addedDate}} </mat-cell>
    </ng-container>

    <!-- Added By Column -->
    <ng-container matColumnDef="addedBy">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Added By </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.addedBy}} </mat-cell>
    </ng-container>

    <!-- Released Date Column -->
    <ng-container matColumnDef="releasedDate">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Released Date </mat-header-cell>
        <mat-cell *matCellDef="let element" style="white-space: nowrap;"> {{element.releasedDate}} </mat-cell>
    </ng-container>

    <!-- Status Column -->
    <ng-container matColumnDef="status">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Status </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.status}} </mat-cell>
    </ng-container>

    <!-- Seasons Column -->
    <ng-container matColumnDef="seasons">
        <mat-header-cell *matHeaderCellDef mat-sort-header> No of Seasons </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.seasons}} </mat-cell>
    </ng-container>

    <!-- Episodes Column -->
    <ng-container matColumnDef="episodes">
        <mat-header-cell *matHeaderCellDef mat-sort-header> No of Episodes </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.episodes}} </mat-cell>
    </ng-container>

    <!-- Language Column -->
    <ng-container matColumnDef="language">
        <mat-header-cell *matHeaderCellDef mat-sort-header> Language </mat-header-cell>
        <mat-cell *matCellDef="let element"> {{element.language}} </mat-cell>
    </ng-container>

    <!-- Action Buttons Column -->
    <ng-container matColumnDef="action">
        <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
        <mat-cell *matCellDef="let element;let i = index">
            <button (click)="deleteRecord(element)" class="btn btn-danger btn-sm"><i class="fa fa-trash"></i></button>
            <button (click)="editRecord(element)" class="btn btn-primary btn-sm ms-2"><i
                    class="fa fa-edit"></i></button>
        </mat-cell>
    </ng-container>

    <!-- Header and Row definitions -->
    <mat-header-row *matHeaderRowDef="displayedColumnsTable"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumnsTable;"></mat-row>

</mat-table>
<mat-paginator #paginator [pageSize]="5" [pageSizeOptions]="pageSizeOptions"
    [showFirstLastButtons]="true"></mat-paginator>